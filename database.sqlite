-- ---------------- Users Table ----------------
CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    email TEXT UNIQUE NOT NULL,
    password TEXT NOT NULL,
    type TEXT NOT NULL CHECK(type IN ('organization', 'volunteer')),
    name TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Sample Users
INSERT INTO users (email, password, type, name) VALUES
('rishikumar@gmail.com', '$2b$10$ux7DUcSz0qgl6NmfmLP4i.s5jWLxpMc/VZQhOQiZnGcBUIjXazIMm', 'organization', 'Rishikumar'),
('abuthahirtj72@gmail.com', '$2b$10$GJrOLDD5SA513p0RJTnOcOW/HvTk1PoLIqYaKUu9UBnBcDVuKn2/','organization','Syed'),
('viswasenthil01@gmail.com','$2b$10$ALmvTf3p4mhfGTMOQ/pFEOwh66P3ZKAj204PC317htptZLrjQiE1a','volunteer','Viswa'),
('mhokanr@gmail.com','$2b$10$mFOej6Fx3XtGBl/nqhQfTeWuTJ7cPv0oIVn3VKkVlW94h/M2L.GI','organization','Rhokan'),
('rhokanr@gmail.com','$2b$10$fg8NwLlNwMPLHOlnu3o6cefoTmP.Af9AHpsIZjs.UWLrntkcwhz3.','volunteer','Mohan'),
('admin@example.com','$2b$10$xz7vQu6gwJYnhx7JiP8eteQvNBfGxb2Fm3hrMhOccSShvvsH2zk5O','organization','Admin Organization');

-- ---------------- Announcements Table ----------------
CREATE TABLE IF NOT EXISTS announcements (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    date DATE NOT NULL,
    location TEXT NOT NULL,
    description TEXT NOT NULL,
    organization_id INTEGER NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (organization_id) REFERENCES users(id)
);

-- Sample Announcements
INSERT INTO announcements (title, date, location, description, organization_id) VALUES
('Painting Service','2025-10-24','Coimbatore','Get ready folks for volunteers',1),
('Parenting','2025-09-24','Karur','Need elders for parenting',2),
('Food','2025-09-22','Tiruppur','We need folks for volunteering, are you ready?',4);

-- ---------------- Volunteer Activities Table ----------------
CREATE TABLE IF NOT EXISTS volunteer_activities (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    volunteer_id INTEGER NOT NULL,
    announcement_id INTEGER NOT NULL,
    hours INTEGER DEFAULT 0,
    status TEXT DEFAULT 'applied' CHECK(status IN ('applied', 'completed', 'cancelled')),
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (volunteer_id) REFERENCES users(id),
    FOREIGN KEY (announcement_id) REFERENCES announcements(id)
);

-- Sample Volunteer Activities
INSERT INTO volunteer_activities (volunteer_id, announcement_id, hours, status) VALUES
(3,1,0,'applied'),
(3,2,0,'applied'),
(3,3,0,'applied'),
(5,3,0,'applied'),
(5,2,0,'applied');
